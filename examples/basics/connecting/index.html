<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            Connecting
        </title>
    </head>
    <body>
        <script src='../../../dist/trux.js'></script>
        <script>
            var app = document.createElement('div');
            var character = new trux.Model({ name: 'Frodo' });
            var hobbit = {
              truxid: 'HOBBIT',
              storeDidUpdate: function () {
                  document.getElementById('app').innerHTML = character.data.name;
              }
            }
            var hobbits = [
              'Frodo',
              'Sam',
              'Pippin',
              'Merry'
            ];

            app.id = 'app';
            document.body.appendChild(app);
            character.connect(hobbit);

            setInterval(function() {
              character.data.name = hobbits[Math.floor(Math.random() * hobbits.length)];
              character.persist();
            }, 1000);
        </script>
    </body>
</html>
