!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.qwest=e()}}(function(){var e;return function t(e,n,o){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return r(n?n:t)},p,p.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,n,o){!function(t){"use strict";var o=function(e){var t=function(e,t,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(n)},n=function(e,o,r){var i,s,a;if("[object Array]"===Object.prototype.toString.call(o))for(i=0,s=o.length;s>i;i++)n(e+"["+("object"==typeof o[i]?i:"")+"]",o[i],r);else if(o&&"[object Object]"===o.toString())for(a in o)o.hasOwnProperty(a)&&(e?n(e+"["+a+"]",o[a],r,t):n(a,o[a],r,t));else if(e)t(r,e,o);else for(a in o)t(r,a,o[a]);return r};return n("",e,[]).join("&").replace(/%20/g,"+")};"object"==typeof n&&"object"==typeof n.exports?n.exports=o:"function"==typeof e&&e.amd?e([],function(){return o}):t.param=o}(this)},{}],2:[function(e,t,n){!function(e){function t(e){return"function"==typeof e}function n(e){return"object"==typeof e}function o(e){"undefined"!=typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)}var r;e[0][e[1]]=function i(e){var s,a=[],u=[],c=function(e,t){return null==s&&null!=e&&(s=e,a=t,u.length&&o(function(){for(var e=0;e<u.length;e++)u[e]()})),s};return c.then=function(c,p){var f=i(e),l=function(){function e(o){var i,s=0;try{if(o&&(n(o)||t(o))&&t(i=o.then)){if(o===f)throw new TypeError;i.call(o,function(){s++||e.apply(r,arguments)},function(e){s++||f(!1,[e])})}else f(!0,arguments)}catch(a){s++||f(!1,[a])}}try{var o=s?c:p;t(o)?e(o.apply(r,a||[])):f(s,a)}catch(i){f(!1,[i])}};return null!=s?o(l):u.push(l),f},e&&(c=e(c)),c}}("undefined"==typeof t?[window,"pinkySwear"]:[t,"exports"])},{}],qwest:[function(e,t,n){t.exports=function(){var t="undefined"!=typeof window?window:self,n=e("pinkyswear"),o=e("jquery-param"),r={},i="json",s="post",a=null,u=0,c=[],p=t.XMLHttpRequest?function(){return new t.XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},f=""===p().responseType,l=function(e,l,h,d,y){e=e.toUpperCase(),h=h||null,d=d||{};for(var m in r)if(!(m in d))if("object"==typeof r[m]&&"object"==typeof d[m])for(var v in r[m])d[m][v]=r[m][v];else d[m]=r[m];var T,g,w,O,x,b=!1,j=!1,E=!1,C=0,L={},q={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded",document:"text/html"},D={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},M=!1,P=n(function(n){return n.abort=function(){E||(g&&4!=g.readyState&&g.abort(),M&&(--u,M=!1),E=!0)},n.send=function(){if(!M){if(u==a)return void c.push(n);if(E)return void(c.length&&c.shift().send());if(++u,M=!0,g=p(),T&&("withCredentials"in g||!t.XDomainRequest||(g=new XDomainRequest,j=!0,"GET"!=e&&"POST"!=e&&(e="POST"))),j?g.open(e,l):(g.open(e,l,d.async,d.user,d.password),f&&d.async&&(g.withCredentials=d.withCredentials)),!j)for(var o in L)L[o]&&g.setRequestHeader(o,L[o]);if(f&&"auto"!=d.responseType)try{g.responseType=d.responseType,b=g.responseType==d.responseType}catch(r){}f||j?(g.onload=R,g.onerror=S,j&&(g.onprogress=function(){})):g.onreadystatechange=function(){4==g.readyState&&R()},d.async?"timeout"in g?(g.timeout=d.timeout,g.ontimeout=A):w=setTimeout(A,d.timeout):j&&(g.ontimeout=function(){}),"auto"!=d.responseType&&"overrideMimeType"in g&&g.overrideMimeType(q[d.responseType]),y&&y(g),j?setTimeout(function(){g.send("GET"!=e?h:null)},0):g.send("GET"!=e?h:null)}},n}),R=function(){var e;if(M=!1,clearTimeout(w),c.length&&c.shift().send(),!E){--u;try{if(b){if("response"in g&&null===g.response)throw"The request response is empty";x=g.response}else{if(e=d.responseType,"auto"==e)if(j)e=i;else{var n=g.getResponseHeader("Content-Type")||"";e=n.indexOf(q.json)>-1?"json":n.indexOf(q.xml)>-1?"xml":"text"}switch(e){case"json":if(g.responseText.length)try{x="JSON"in t?JSON.parse(g.responseText):new Function("return ("+g.responseText+")")()}catch(o){throw"Error while parsing JSON body : "+o}break;case"xml":try{t.DOMParser?x=(new DOMParser).parseFromString(g.responseText,"text/xml"):(x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",x.loadXML(g.responseText))}catch(o){x=void 0}if(!x||!x.documentElement||x.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:x=g.responseText}}if("status"in g&&!/^2|1223/.test(g.status))throw g.status+" ("+g.statusText+")";P(!0,[g,x])}catch(o){P(!1,[o,g,x])}}},S=function(e){E||(e="string"==typeof e?e:"Connection aborted",P.abort(),P(!1,[new Error(e),g,null]))},A=function(){E||(d.attempts&&++C==d.attempts?S("Timeout ("+l+")"):(g.abort(),M=!1,P.send()))};if(d.async=!("async"in d&&!d.async),d.cache="cache"in d&&!!d.cache,d.dataType="dataType"in d?d.dataType.toLowerCase():s,d.responseType="responseType"in d?d.responseType.toLowerCase():"auto",d.user=d.user||"",d.password=d.password||"",d.withCredentials=!!d.withCredentials,d.timeout="timeout"in d?parseInt(d.timeout,10):3e4,d.attempts="attempts"in d?parseInt(d.attempts,10):1,O=l.match(/\/\/(.+?)\//),T=O&&!!O[1]&&O[1]!=location.host,"ArrayBuffer"in t&&h instanceof ArrayBuffer?d.dataType="arraybuffer":"Blob"in t&&h instanceof Blob?d.dataType="blob":"Document"in t&&h instanceof Document?d.dataType="document":"FormData"in t&&h instanceof FormData&&(d.dataType="formdata"),null!==h)switch(d.dataType){case"json":h=JSON.stringify(h);break;case"post":h=o(h)}if(d.headers){var N=function(e,t,n){return t+n.toUpperCase()};for(O in d.headers)L[O.replace(/(^|-)([^-])/g,N)]=d.headers[O]}return"Content-Type"in L||"GET"==e||d.dataType in q&&q[d.dataType]&&(L["Content-Type"]=q[d.dataType]),L.Accept||(L.Accept=d.responseType in D?D[d.responseType]:"*/*"),T||"X-Requested-With"in L||(L["X-Requested-With"]="XMLHttpRequest"),d.cache||"Cache-Control"in L||(L["Cache-Control"]="no-cache"),"GET"==e&&h&&"string"==typeof h&&(l+=(/\?/.test(l)?"&":"?")+h),d.async&&P.send(),P},h=function(e){var t=[],o=0,r=[];return n(function(n){var i=-1,s=function(e){return function(s,a,u,c){var p=++i;return++o,t.push(l(e,n.base+s,a,u,c).then(function(e,t){r[p]=arguments,--o||n(!0,1==r.length?r[0]:[r])},function(){n(!1,arguments)})),n}};n.get=s("GET"),n.post=s("POST"),n.put=s("PUT"),n["delete"]=s("DELETE"),n["catch"]=function(e){return n.then(null,e)},n.complete=function(e){var t=function(){e()};return n.then(t,t)},n.map=function(e,t,n,o,r){return s(e.toUpperCase()).call(this,t,n,o,r)};for(var a in e)a in n||(n[a]=e[a]);return n.send=function(){for(var e=0,o=t.length;o>e;++e)t[e].send();return n},n.abort=function(){for(var e=0,o=t.length;o>e;++e)t[e].abort();return n},n})},d={base:"",get:function(){return h(d).get.apply(this,arguments)},post:function(){return h(d).post.apply(this,arguments)},put:function(){return h(d).put.apply(this,arguments)},"delete":function(){return h(d)["delete"].apply(this,arguments)},map:function(){return h(d).map.apply(this,arguments)},xhr2:f,limit:function(e){return a=e,d},setDefaultOptions:function(e){return r=e,d},setDefaultXdrResponseType:function(e){return i=e.toLowerCase(),d},setDefaultDataType:function(e){return s=e.toLowerCase(),d},getOpenRequests:function(){return u}};return d}()},{"jquery-param":1,pinkyswear:2}]},{},[1,2])("qwest")}),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var o=e.prototype,r=this,i=r.EventEmitter;o.getListeners=function(e){var t,n,o=this._getEvents();if(e instanceof RegExp){t={};for(n in o)o.hasOwnProperty(n)&&e.test(n)&&(t[n]=o[n])}else t=o[e]||(o[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,n){var o,r=this.getListenersAsObject(e),i="object"==typeof n;for(o in r)r.hasOwnProperty(o)&&t(r[o],n)===-1&&r[o].push(i?n:{listener:n,once:!1});return this},o.on=n("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=n("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,n){var o,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&(o=t(i[r],n),o!==-1&&i[r].splice(o,1));return this},o.off=n("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var o,r,i=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(o=n.length;o--;)i.call(this,t,n[o]);else for(o in t)t.hasOwnProperty(o)&&(r=t[o])&&("function"==typeof r?i.call(this,o,r):s.call(this,o,r));return this},o.removeEvent=function(e){var t,n=typeof e,o=this._getEvents();if("string"===n)delete o[e];else if(e instanceof RegExp)for(t in o)o.hasOwnProperty(t)&&e.test(t)&&delete o[t];else delete this._events;return this},o.removeAllListeners=n("removeEvent"),o.emitEvent=function(e,t){var n,o,r,i,s,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),r=n.length;r--;)o=n[r],o.once===!0&&this.removeListener(e,o.listener),s=o.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,o.listener);return this},o.trigger=n("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=i,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:r.EventEmitter=e}.call(this),function(){"use strict";this.Trux={extend:function(e,t,n){console.log("Trux.extend will be deprecated soon, please use Trux.Model.extend or Trux.Collection.extend instead");var o="function"==typeof n?n:Trux.Model,r=function(e){o.call(this,e),"function"==typeof t&&t(this)};if(r.prototype=Object.create(o.prototype),"object"!=typeof e)return r;for(var i in e)e.hasOwnProperty(i)&&(r.prototype[i]=e[i]);return r},models:{},collections:{},Base:function(){function e(){if(Object.keys(t.components).length)for(var e in t.components)t.components.hasOwnProperty(e)&&t.components[e].appDataDidChange()}var t=this;this.components={},this.emitter=new EventEmitter,this.emitter.addListener("change",e),this.requestOptions={},this.GET=!1,this.POST=!1,this.PUT=!1,this.PATCH=!1,this.DELETE=!1}},Trux.Base.prototype.bindComponent=function(e){this.components[e.truxId]=e},Trux.Base.prototype.unbindComponent=function(e){"undefined"!=typeof this.components[e.truxId]&&delete this.components[e.truxId]},Trux.Base.prototype.emitChangeEvent=function(){this.emitter.emitEvent("change")},Trux.Base.prototype.setRequestOptions=function(e){return this.requestOptions=e,this}}.call(this),function(e){"use strict";e.Model=function(t){e.Base.call(this);var n=t&&0!==Object.keys(t).length?JSON.parse(JSON.stringify(t)):{};return this.data=t,this.collection=!1,this.className="TruxModel",this.setData=function(e){this.data=e,n=e&&0!==Object.keys(e).length?JSON.parse(JSON.stringify(e)):{}},this.restoreData=function(){this.data=n&&0!==Object.keys(n).length?JSON.parse(JSON.stringify(n)):{}},this},e.Model.prototype=Object.create(e.Base.prototype),e.Model.prototype.persist=function(){var e=this;return e.collection?void e.collection.fetch({onDone:function(){e.collection.emitChangeEvent()}}):void this.emitChangeEvent()},e.Model.prototype.fetch=function(e){var t=this;return qwest.get(this.GET,null,this.requestOptions).then(function(n,o){"object"==typeof o&&(t.setData(o),e&&e.onDone&&e.onDone(o))})["catch"](function(t,n,o){e&&e.onFail&&e.onFail(t,n,o)}),this},e.Model.prototype.create=function(e,t){var n=this;return qwest.post(this.POST,e,this.requestOptions).then(function(e,o){"object"==typeof o&&(n.setData(o),t&&t.onDone&&t.onDone(o))})["catch"](function(e,n,o){t&&t.onFail&&t.onFail(e,n,o)}),this},e.Model.prototype.update=function(e,t){var n=this;return qwest.put(this.PUT,e,this.requestOptions).then(function(e,o){"object"==typeof o&&(n.setData(o),n.persist(),t&&t.onDone&&t.onDone(o))})["catch"](function(e,o,r){n.restoreData(),n.persist(),t&&t.onFail&&t.onFail(r,e,o)}),this},e.Model.prototype.purge=function(){this.data=null},e.Model.extend=function(t,n){var o=function(t){e.Model.call(this,t),"function"==typeof n&&n(this)};if(o.prototype=Object.create(e.Model.prototype),"object"!=typeof t)return o;for(var r in t)t.hasOwnProperty(r)&&(o.prototype[r]=t[r]);return o},e.Model.modify=function(t){if("object"!=typeof t)return this;for(var n in t)t.hasOwnProperty(n)&&(e.Model.prototype[n]=t[n]);return this}}(Trux),function(e){"use strict";e.Collection=function(t){e.Base.call(this);return this.modelConstructor=t,this.models=[],this.className="TruxCollection",this},e.Collection.prototype=Object.create(e.Base.prototype),e.Collection.prototype.fetch=function(e){var t=this;return qwest.get(this.GET,null,this.requestOptions).then(function(n,o){t.setModels(o),e&&e.onDone&&e.onDone(o)})["catch"](function(t,n,o){e&&e.onFail&&e.onFail(t,n,o)}),this},e.Collection.prototype.setModels=function(e){if(Array.isArray(e)){this.purgeModels();var t,n=e.length;for(t=0;t<n;t++){var o=new this.modelConstructor(e[t]);this.append(o)}}},e.Collection.prototype.append=function(e){e.collection=this,this.models.push(e)},e.Collection.prototype.prepend=function(e){e.collection=this,this.models.unshift(e)},e.Collection.prototype.purgeModels=function(){this.models=[]},e.Collection.extend=function(t,n){var o=function(t){e.Collection.call(this,t),"function"==typeof n&&n(this)};if(o.prototype=Object.create(e.Collection.prototype),"object"!=typeof t)return o;for(var r in t)t.hasOwnProperty(r)&&(o.prototype[r]=t[r]);return o},e.Collection.modify=function(t){if("object"!=typeof t)return this;for(var n in t)t.hasOwnProperty(n)&&(e.Collection.prototype[n]=t[n]);return this}}(Trux);